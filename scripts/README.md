# Utility Scripts and Programs for Cholesky Factorization

All scripts or programs in this folder serve utility purposes. They do not belong to the Cholesky factorization algorithm per se, but simplify the testing and benchmarking process. Currently, the following functionality is provided (to be updated):

- Automatic generation of s.p.d. matrices of arbitrary sizes
- Automatic comparison between our implementation's output matrix and a reference Cholesky implementation.

## Automatic Generation of S.P.D. Matrices
There are currently two programs that achieve the same goal, one written in Python and the other written in C++. It is recommended to use the Python script for smaller matrix sizes (e.g. up to 1024) and the C++ script for larger matrices. 

### Python Script
Use the following command to generate an input matrix (`data/input_512.bin`) and the correct Cholesky factorization (`data/result_512.bin`) of size e.g. 512:
```sh
python3 src/scripts/cholesky_helper.py --generate=512
```
Both files are placed in the `data/` folder with their standardized name. Note that the file `cholesky_helper.py` defines two functions, and can also be imported by other python scripts trying to use this functionality.

### C++ Program
This program must first be compiled before usage. Enter
```sh
g++ src/scripts/CholeskyHelper.cpp -o src/scripts/CholeskyHelper -llapacke -lcblas -lblas -llapack -lgfortran -I include/
```
to compile and then run it via 
```sh
./src/scripts/CholeskyHelper --generate=16384
```

## Automatic Comparison of Result Matrices
To test our implementation, we compare the resulting output file `data/output_16384.bin` to the correct factorization at file `data/result_16384.bin`. Obviously, the `data/result_16384.bin` file must have been generated by a call to either the python script or the C++ program. 

### Python Script
To test whether our algorithm returns the correct result, run
```sh
python3 src/scripts/cholesky_helper.py --compare=512
```
which will return the matrix norm (Frobenius) of the difference matrix.

### C++ Program
After having compiled the program with the above command, run
```sh
python3 src/scripts/CholeskyHelper --compare=16384
```
which will also return the matrix norm (Frobenius) of the difference matrix.

### Benchmark helper
The script `benchmark_helper.py` takes a config file as an argument.
The config file has two sections, one for scalapack and one for our algorithm.
They can't be the same because we have different grid layouts for both algorithms.
